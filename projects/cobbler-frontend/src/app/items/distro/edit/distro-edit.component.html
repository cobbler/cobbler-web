<div class="title-table">
  <div class="title-row">
    <h1 class="title title-cell-text">Name: {{ name }}</h1>
    <span class="title-cell-button">
      <button
        mat-icon-button
        [disabled]="isEditMode"
        (click)="this.refreshData()"
        matTooltip="Refresh data"
      >
        <mat-icon>refresh</mat-icon>
      </button>
    </span>
    <span class="title-cell-button">
      <button
        mat-icon-button
        [disabled]="isEditMode"
        (click)="this.copyDistro(this.distro.uid, this.distro.name)"
        matTooltip="Copy"
      >
        <mat-icon>content_copy</mat-icon>
      </button>
    </span>
    <span class="title-cell-button">
      <button
        mat-icon-button
        [disabled]="isEditMode"
        (click)="this.showAsRendered()"
        matTooltip="Show rendered data"
      >
        <mat-icon>info</mat-icon>
      </button>
    </span>
    <span class="title-cell-button">
      <button
        mat-icon-button
        [disabled]="isEditMode"
        (click)="this.editDistro()"
        matTooltip="Edit"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </span>
    <span class="title-cell-button">
      <button
        mat-icon-button
        [disabled]="isEditMode"
        (click)="this.removeDistro()"
        matTooltip="Delete"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </span>
    @if (isEditMode) {
      <span class="title-cell-button">
        <button
          mat-icon-button
          (click)="this.cancelEdit()"
          matTooltip="Cancel edit"
        >
          <mat-icon>cancel</mat-icon>
        </button>
      </span>
    }
  </div>
</div>

<form class="form-replicate" [formGroup]="distroReadonlyFormGroup">
  <mat-form-field class="form-field-full-width">
    <mat-label>Name</mat-label>
    <input matInput type="text" formControlName="name" [readonly]="true" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>UID</mat-label>
    <input matInput type="text" formControlName="uid" [readonly]="true" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Last modified time</mat-label>
    <input matInput type="text" formControlName="mtime" [readonly]="true" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Creation time</mat-label>
    <input matInput type="text" formControlName="ctime" [readonly]="true" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Depth</mat-label>
    <input matInput type="number" formControlName="depth" [readonly]="true" />
  </mat-form-field>
  <mat-checkbox
    class="form-field-full-width"
    formControlName="is_subobject"
    [disableRipple]="true"
    (click)="$event.preventDefault()"
  >
    Is Subobject?
  </mat-checkbox>
  <mat-form-field class="form-field-full-width">
    <mat-label>Tree Build Time</mat-label>
    <input
      matInput
      type="text"
      formControlName="tree_build_time"
      [readonly]="true"
    />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Remote GRUB Initrd</mat-label>
    <input
      matInput
      type="text"
      formControlName="remote_grub_initrd"
      [readonly]="true"
    />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Remote GRUB Kernel</mat-label>
    <input
      matInput
      type="text"
      formControlName="remote_grub_kernel"
      [readonly]="true"
    />
  </mat-form-field>
</form>

<form class="form-replicate" [formGroup]="distroFormGroup">
  <mat-form-field class="form-field-full-width">
    <mat-label>Architecture</mat-label>
    <input matInput type="text" formControlName="arch" />
  </mat-form-field>
  <ng-container class="form-field-full-width">
    <cobbler-key-value-editor
      label="Automatic Installation Template Metadata"
      formControlName="autoinstall_meta"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="autoinstall_meta_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <ng-container class="form-field-full-width">
    <cobbler-key-value-editor
      label="TFTP Boot Files"
      formControlName="boot_files"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="boot_files_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <ng-container class="form-field-full-width">
    <cobbler-multi-select
      label="Boot Loaders"
      formControlName="boot_loaders"
    ></cobbler-multi-select>
    <mat-checkbox formControlName="boot_loaders_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <mat-form-field class="form-field-full-width">
    <mat-label>Breed</mat-label>
    <input matInput type="text" formControlName="breed" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Comment</mat-label>
    <input matInput type="text" formControlName="comment" />
  </mat-form-field>
  <ng-container class="form-field-full-width">
    <cobbler-key-value-editor
      label="Fetchable Files"
      formControlName="fetchable_files"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="fetchable_files_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <mat-form-field class="form-field-full-width">
    <mat-label>kernel</mat-label>
    <input matInput type="text" formControlName="kernel" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>initrd</mat-label>
    <input matInput type="text" formControlName="initrd" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Remote Boot Initrd</mat-label>
    <input matInput type="text" formControlName="remote_boot_initrd" />
  </mat-form-field>
  <mat-form-field class="form-field-full-width">
    <mat-label>Remote Boot Kernel</mat-label>
    <input matInput type="text" formControlName="remote_boot_kernel" />
  </mat-form-field>
  <ng-container class="form-field-full-width">
    <cobbler-key-value-editor
      label="Kernel Options"
      formControlName="kernel_options"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="kernel_options_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <ng-container class="form-field-full-width">
    <cobbler-key-value-editor
      label="Kernel Options (Post Install)"
      formControlName="kernel_options_post"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="kernel_options_post_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <ng-container class="form-field-full-width">
    <cobbler-multi-select
      label="Management Classes"
      formControlName="mgmt_classes"
    ></cobbler-multi-select>
    <mat-checkbox formControlName="mgmt_classes_inherited"
      >Inherited</mat-checkbox
    >
  </ng-container>
  <mat-form-field class="form-field-full-width">
    <mat-label>Operating System Version</mat-label>
    <input matInput type="text" formControlName="os_version" />
  </mat-form-field>
  <ng-container class="form-field-full-width">
    <cobbler-multi-select
      label="Owners"
      formControlName="owners"
    ></cobbler-multi-select>
    <mat-checkbox formControlName="owners_inherited">Inherited</mat-checkbox>
  </ng-container>
  <mat-form-field class="form-field-full-width">
    <mat-label>RedHat Management Key</mat-label>
    <input matInput type="text" formControlName="redhat_management_key" />
  </mat-form-field>
  <div class="form-field-full-width">
    <cobbler-key-value-editor
      label="Template Files"
      formControlName="template_files"
    ></cobbler-key-value-editor>
    <mat-checkbox formControlName="template_files_inherited">
      Inherited
    </mat-checkbox>
  </div>
  @if (isEditMode) {
    <button mat-button (click)="saveDistro()">Save Distro</button>
  }
</form>
